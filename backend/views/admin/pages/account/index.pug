extends ../../layouts/default.pug
include ../../mixins/box-alert.pug

block main 
    if(role.permissions.includes("account_view"))
        - if(messages.success)
            +alert-success(messages.success)
        .accounts   
            .row 
                .col-12 
                    h1= message 
                .col-12 
                    .card 
                        .card-header Danh sách 
                        .card-body
                            .row 
                                .col-12
                                    .text-right 
                                        a(href=`${prefixAdmin}/accounts/create` class="btn btn-outline-success") +Thêm mới
                                    table.my-5
                                        thead 
                                            tr 
                                                th STT 
                                                th Avartar
                                                th Họ tên
                                                th Phân quyền
                                                th Email
                                                th Trạng thái
                                                th Hành động


                                        tbody        
                                            each item, index in data
                                                tr
                                                    td #{index + 1}
                                                    td 
                                                        img(src=item.avartar alt="Avartar") 
                                                    td #{item.fullName}
                                                    each role in roles 
                                                        if(role.id === item.role_id)
                                                            td #{role.title}
                                                    td #{item.email}
                                                    td
                                                        if(item.status === "active")

                                                            a(class="badge badge-success" data-status=item.status data-id=item.id button-change-status) Hoạt động 
                                                        else 
                                                            a(class="badge badge-danger" data-status=item.status data-id=item.id button-change-status) Dừng hoạt động 

                                                    td 
                                                        a(href=`${prefixAdmin}/accounts/detail/${item.id}` class="btn btn-outline-secondary") Chi tiết
                                                        a(href=`${prefixAdmin}/accounts/edit/${item.id}` class="btn btn-outline-warning") Sửa
                                                        button(id=item.id  class="btn btn-outline-danger" button-delete-role) Xóa

            
                    