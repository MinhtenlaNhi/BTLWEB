extends ../../layouts/default.pug
include ../../mixins/box-head.pug
include ../../mixins/box-alert.pug

block main
    - if(messages.success)
        +alert-success(messages.success)
    - if(messages.error)
        +alert-error(messages.error)
    
    .container
        if(listCart.length > 0)
            .cart
                h1.text-success Giỏ hàng
                table(class="table table-bordered text-center")
                    thead
                        th STT 
                        th Ảnh 
                        th Tên 
                        th Giá 
                        th Số lượng 
                        th Tổng tiền 
                        th Hành động
                    tbody 
                        each item,index in listCart 
                            tr 
                                td #{index + 1}
                                td
                                    img(src=item.thumbnail alt="Ảnh sản phẩm")
                                td 
                                    a(href=`/products/detail/${item.slug}`) #{item.title}                              
                                td #{item.price}$
                                td 
                                    input(class="w-25" type="number" name="quantity" value=item.quantity id=item.product_id cart-quantity min=1 )
                                td #{item.totalPrice.toFixed(2)}$
                                td 
                                    a(href=`/cart/delete/${item.product_id}` class="btn btn-danger") Xóa
                div(class="text-right")
                    h1 
                        b Tổng đơn hàng: #{listCart.totalCart.toFixed(2)}$
                div(class="text-right") 
                    a(href="/checkout" class="btn btn-success") Thanh toán
        else 
            div Không có sản phẩm trong giỏ hàng
    script(src="/client/js/cart.js")




